{{ $ctx := .context }}
{{ $showSummary := .summary }}
<div class="relative p-[1rem] bg-white dark:bg-neutral-800 rounded-lg shadow-md border border-gray-200 dark:border-gray-700 min-h-[400px] overflow-hidden {{ if $ctx.Params.private }}private-card{{ end }}"
    style="view-transition-name: card-{{ $ctx.File.UniqueID }}">

    {{ if not $ctx.Params.private }}
    <!-- 普通卡片：如果有特色图片，显示图片 -->
    {{ if $ctx.Params.image }}
    <div class="mb-3 -mx-[1rem] -mt-[1rem]">
        <img src="{{ $ctx.Params.image }}" alt="{{ $ctx.Title }}" class="w-full h-[150px] object-cover rounded-t-lg">
    </div>
    {{ end }}
    {{ end }}

    <div class="card-header">
        <h3 class="text-lg font-extrabold m-0 text-gray-900 dark:text-gray-100 line-clamp-2"
            data-pagefind-meta="title"
            data-pagefind-sort="date[data-date], weight[data-weight]"
            data-date="{{ .Date.Format "2006-01-02" }}"
            data-weight="5">
            {{ partial "components/private-title" (dict "ctx" $ctx "type" "card") }}
        </h3>
        {{ if not $ctx.Params.private }}
        <!-- 普通卡片：显示日期和标签 -->
        <div class="text-sm m-0 mt-1">
            {{ partial "components/date" $ctx }}{{ if $ctx.Params.tags }} {{ partial "components/tags" $ctx }}{{ end }}
        </div>
        {{ end }}
    </div>
    {{ if $ctx.Params.private }}
    <!-- 私密卡片：显示占位内容 -->
    <div class="private-card__placeholder">
        <div class="private-card__placeholder-icon">
            <img src="/hand-svgrepo-com.svg" alt="手势图标">
        </div>
        <div class="private-card__placeholder-text">
            暂不可见
        </div>
    </div>
    {{ else }}
    <!-- 普通卡片：显示正常内容 -->
    <div class="text-sm mt-2 markdown-body line-clamp-6 overflow-hidden">
        {{ if $showSummary }}{{ $ctx.Summary }}{{ else }}{{ $ctx.Content }}{{ end }}
    </div>
    {{ end }}
</div>
