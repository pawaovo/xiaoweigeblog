{{ define "main" }}
<article class="taxonomy">
  {{ partial "header.html" . }}
  {{ partial "components/postnav.html" . }}

  <!-- Series With Banners -->
  {{ if eq .Site.Language.Lang "zh" }}
    <div id="post-series">
        <div id="post-series-list">
            {{ range .Site.Data.series }}
            <a class="post-series-item"
                href="{{ .link }}"
                title="{{ .description }}"
                data-umami-event="ğŸš© Click series link from Banner"
            >
                <div class="post-series-cover">
                    <img src="{{ .cover }}" />
                </div>
                <div class="post-series-text">
                    <h3>{{ .name }}</h3>
                </div>
            </a>
            {{ end }}
        </div>
    </div>
  {{ end }}

  <!-- Display Categories -->
    {{ $featured := slice "ç¨»è‰äººå‘¨åˆŠ" "å¹´ç»ˆæ€»ç»“" "æ½ç‰©æ—¥å¿—" "æå®¢æ­»äº¡è®¡åˆ’ä¹¦" }}
    <h2>å‘¨æœŸæ€§åˆŠç‰©</h2>
    <section class="taxonomy-categories">
    {{ range sort .Site.Taxonomies.categories ".Count" "desc" }}
    {{ if in $featured .Page.Title }}
        <div class="taxonomy-categories-item">
            <h3 class="category-title">
                <a href="{{ .Page.RelPermalink }}">
                    {{ with .Page.Params.icon }}<span>{{ . }}</span>{{ end }} {{ .Page.LinkTitle }}
                </a>
            </h3>
            <p class="category-description">{{ .Page.Params.description | markdownify }}</p>
            <ul class="category-articles">
            {{ range first 6 .Pages }}
                <li><a href="{{ .RelPermalink }}">{{ .Title }}</a></li>
            {{ end }}
            </ul>
            {{ if gt .Count 6 }}
            <a class="category-link"
                href="{{ .Page.RelPermalink }}"
            >é˜…è¯»æ‰€æœ‰ {{ .Count }} ç¯‡æ–‡ç« </a>
            {{ end }}
        </div>
    {{ end }}
    {{ end }}
    </section>

    <!-- Render Other Categories -->
    <h2>æ–‡ç« ç³»åˆ—</h2>
    <section class="taxonomy-categories">
    {{ range sort .Site.Taxonomies.categories ".Count" "desc" }}
    {{ if not (in $featured .Page.Title) }}
        <div class="taxonomy-categories-item">
            <h3 class="category-title">
                <a href="{{ .Page.RelPermalink }}">
                    {{ with .Page.Params.icon }}<span>{{ . }}</span>{{ end }} {{ .Page.LinkTitle }}
                </a>
            </h3>
            <p class="category-description">{{ .Page.Params.description | markdownify }}</p>
            <ul class="category-articles">
            {{ range first 6 .Pages }}
                <li><a href="{{ .RelPermalink }}">{{ .Title }}</a></li>
            {{ end }}
            </ul>
            {{ if gt .Count 6 }}
            <a class="category-link"
                href="{{ .Page.RelPermalink }}"
            >é˜…è¯»æ‰€æœ‰ {{ .Count }} ç¯‡æ–‡ç« </a>
            {{ end }}
        </div>
    {{ end }}
    {{ end }}
    </section>

    <p class="uncategorized-link-container">
        <a class="uncategorized-link" href="/categories/uncategorized/">æŸ¥çœ‹éšç¬”</a>
    </p>
</article>
{{ partial "footer.html" . }}
{{ end }}
